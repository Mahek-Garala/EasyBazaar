{% extends 'base.html' %} 
{% block content %}
<style> 

.filter-panel {
  float:left;
  margin-top:20px;
  margin-left:-76px;
  padding-right:50px;
  
}

  
</style>
<body>
  <div class="container">
    
    <div class="filter-panel">
      <a href="/home"><button class="button-9" role="button">Home</button></a>
      <h2 class="text-lg font-semibold mb-2">Filters</h2>    
      <h2 class="text-lg font-semibold mb-2">price</h2>
      <ul>
        <li class="mb-2"><input type="checkbox" id="filter1" class="mr-2"><=800 &#8377 </li>
        <li class="mb-2"><input type="checkbox" id="filter2" class="mr-2"><=1500 &#8377 </li>
        <li class="mb-2"><input type="checkbox" id="filter3" class="mr-2"><=2500 &#8377 </li>
        <li class="mb-2"><input type="checkbox" id="filter4" class="mr-2"><=5000 &#8377 </li>
        <li class="mb-2"><input type="checkbox" id="filter5" class="mr-2"><=10000 &#8377 </li>
        <li class="mb-2"><input type="checkbox" id="filter6" class="mr-2"><=20000 &#8377 </li>
        <li class="mb-2"><input type="checkbox" id="filter7" class="mr-2"><=50000 &#8377 </li>
        <li class="mb-2"><input type="checkbox" id="filter8" class="mr-2"><=100000 &#8377 </li>
        <li class="mb-2"><input type="checkbox" id="filter9" class="mr-2"><=200000 &#8377 </li>


      </ul>
    </div>
  </div>

    <section class="product-panel" style="margin-top:100px">
      <h1>{{products.category}}</h1>
      <div class="products">
        {% for p in products %}
        <div class="product-card" price="{{ p.price }}">
          <img src="{{p.image.url}}" alt="Product Image" style="height: 350px; width: 336px;">
          <div class="product-info">
            <h3>{{p.name}}({{p.subcategory}})</h3>
            <p id="price">{{p.price}}</p>
            <p>{{p.seller_id.company_name}}</p>
            <p class="description">{{p.description}}</p>
          </div>
          <div class="actions">
            <div class="buttons">
              {% if p.in_cart %}
              <a href="{% url 'cart_view' p.id %}" class="btn btn-success">View Cart</a>
              {% else %}  
              <a href="{% url 'cart' p.id %}" class="btn btn-success">Add to cart</a>
              {% endif %}
            </div>
            <div class="buttons">
              {% if p.in_wishlist %}
              <a href="{% url 'wishlist_view' p.id %}" class="btn btn-primary">View Wishlist</a>
              {% else %}
              <a href="{% url 'wishlist' p.id %}" class="btn btn-primary">Wishlist</a>
              {% endif %}
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </section>
  

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.4.0/gsap.min.js"></script>
  <script src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/16327/MorphSVGPlugin3.min.js"></script>
  <script src="./catogery.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"></script>
  <script>
      var filterCheckboxes = document.querySelectorAll('.filter-panel input[type="checkbox"]');
      filterCheckboxes.forEach(function(checkbox) {
          checkbox.addEventListener('change', function () {
              var products = document.querySelectorAll('.product-card');
              var priceFilters = {
                  'filter1': 800,
                  'filter2': 1500,
                  'filter3': 2500,
                  'filter4': 5000,
                  'filter5':10000,
                  'filter6':20000,
                  'filter7':50000,
                  'filter8':100000,
                  'filter9':200000
              };
              
              // Loop through each product card
              products.forEach(function (product) {
                  var price = parseFloat(product.getAttribute('price'));
                  var showProduct = true;

                  // Loop through each filter checkbox
                  filterCheckboxes.forEach(function(filterCheckbox) {
                      if (filterCheckbox.checked) {
                          var filterId = filterCheckbox.id;
                          var filterPrice = priceFilters[filterId];
                          if (price > filterPrice) {
                              // Hide the product if its price is greater than the filter price
                              showProduct = false;
                          }
                      }
                  });

                  // Show or hide the product based on filter selection
                  if (showProduct) {
                      product.style.display = 'block';
                  } else {
                      product.style.display = 'none';
                  }
              });
          });
      });
  </script>
</body>
{% endblock %}
